#!/bin/bash

PROMPT='[bootstrap]'

# Environment 
export PATH_TO_PLAYGROUND="$HOME/playground"
export PATH_TO_PROJECTS="$HOME/projects"
# export TXT_EDITOR="vim"
# export TERMINAL="alacritty"
# export BROWSER="firefox"

# Echo utility
echo_prompt () {
  echo "$PROMPT $@"
}

# Initialize
init () {
  echo_prompt "Making a PROJECTS folder in $PATH_TO_PROJECTS"
  mkdir -p "$PATH_TO_PROJECTS"
  echo_prompt "Making a PLAYGROUND folder in $PATH_TO_PLAYGROUND"
  mkdir -p "$PATH_TO_PLAYGROUND"
  echo_prompt "Making a mpd and ncmpcpp config folder in $HOME and .config respectively."
  mkdir -p .ncmpcpp
  mkdir -p ~/.config/mpd
  echo_prompt "Disabling mpd as a system service, Enabling as user process."
  sudo systemctl disable mpd.service
  sudo systemctl disable mpd.socket
  systemctl --user enable mpd.service
  systemctl --user enable mpd.socket
}

# Symlink install
symlinks () {
  echo_prompt "Installing symlinks for vim, tmux, and zsh in the home directory..."
  read -p "$PROMPT Proceed? (Y/n)" -n 1 -r
  echo
  if [[ $REPLY =~ ^[Yy]$ ]]  
  then
    ln -svfn ~/Documents/JH/projects/dotfiles/vim/vimrc ~/.vimrc
    ln -svfn ~/Documents/JH/projects/dotfiles/zsh/zshrc ~/.zshrc
    ln -svfn ~/Documents/JH/projects/dotfiles/tmux/tmux.conf ~/.tmux.conf
    ln -svfn ~/Documents/JH/projects/dotfiles/ncmpcpp/config ~/.ncmpcpp/config
    ln -svfn ~/Documents/JH/projects/dotfiles/ncmpcpp/bindings ~/.ncmpcpp/bindings
    ln -svfn ~/Documents/JH/projects/dotfiles/mpd/mpd.conf ~/.config/mpd/mpd.conf
    ln -svfn ~/Documents/JH/projects/dotfiles/scripts ~/scripts
    echo_prompt "symlinking done"
  else
    echo_prompt "Symlinking cancelled"
    return 1
  fi
}

init
symlinks
